# Отчет по лабораторной работе №9  
## Принципы поддержания качества кода: SOLID и Рефакторинг

**Дата:** 2025-12-28  
**Семестр:** 2 курс, 1 полугодие (3 семестр)  
**Группа:** ПИН-б-о-24-1  
**Дисциплина:** Технологии программирования  
**Студент:** Кочкарев Ислам Ильясович  

### Цель работы
Освоить практические навыки рефакторинга кода, применения принципов SOLID, устранения запахов кода и улучшения архитектуры системы управления сотрудниками на Python 3.x.

### Изученные концепции

**SOLID принципы**
- Single Responsibility Principle
- Open/Closed Principle
- Liskov Substitution Principle
- Interface Segregation Principle
- Dependency Inversion Principle

**Паттерны проектирования**
- Strategy Pattern
- **Factory Pattern** (добавлен для удобства создания сотрудников)
- Repository Pattern
- Dependency Injection

**Запахи кода**
- Большой класс
- Длинный метод
- Дублирование кода
- Плохое именование

**Метрики кода**
- Pylint score
- Type Hints Coverage
- Code Duplication
- Cyclomatic Complexity
- Test Coverage

### Выполненные задачи
- Анализ и рефакторинг исходного кода
- Выделены отдельные валидаторы и стратегии расчёта зарплаты/бонусов
- Применены SOLID-принципы (SRP, OCP, LSP, ISP, DIP)
- **Добавлен Factory** для создания сотрудников (удобнее и расширяемее — идея из обсуждения с одногруппником)
- Реализована автоматическая генерация ID в репозитории
- Добавлен метод `get_average_salary()` в класс `Company`
- Достигнуто полное покрытие тестами (97–98%)
- Настроены инструменты качества: pylint, black, mypy и pre-commit хуки

### Ключевые улучшения метрик

| Метрика                  | До рефакторинга | После рефакторинга | Изменение |
|--------------------------|-----------------|--------------------|-----------|
| Pylint Score             | 6.5/10          | **9.4/10**         | **+45%**  |
| Type Hints Coverage      | 30%             | **98%**            | **+68%**  |
| Code Duplication         | 15%             | **0%**             | **-100%** |
| Cyclomatic Complexity    | 8+              | **3–4**            | **-55%**  |
| Test Coverage            | 0%              | **98%**            | **+98%**  |

### Пример работы программы  
(обновлён с использованием Factory и автогенерацией ID)

```text
demo processing...

1. Сотрудники:
- Alice Smith (ID: 1) - $11000.00
- Bob Johnson (ID: 2) - $10100.00
- Charlie Brown (ID: 3) - $3750.00

2. Статистика компании:
- Всего сотрудников: 3
- Общая зарплата: $24850.00
- Средняя зарплата: $8283.33

### Тестирование

Все 24 теста пройдены успешно.

============================= 24 passed in 0.06s ==============================

## Выводы

- Применение SOLID сделало код модульным, расширяемым и легко тестируемым.
- Strategy Pattern позволяет гибко менять алгоритмы расчёта.
- Добавленный Factory Pattern значительно упростил создание объектов сотрудников и demo (предложение одногруппника — оказалось очень полезным).
- Repository с автогенерацией ID стал удобнее.
- Инструменты качества (pylint, mypy, black) теперь неотъемлемая часть разработки.
- Обсуждение архитектуры с одногруппником помогло найти более элегантные решения (Factory, average_salary, улучшенный demo).
